<!-- Web controller for the Browser app -->
<h3 class="controller-title">Browser</h3>
<div class="controller-body">

<p id="browser"></p>
<input id="browserURL" size="60" type="text"/>
<input id="browserSetURL" type="button" value="Set URL"/>

<script>
// Wrap in a function to protect global name space
(function() {
	var Browser = App.subclass().name('Browser')
		.fields({
			url: null,
		})
		.constructor(function(config) {
			this._super(config);

			this.adjustURL();

			this.wrapFields({
				set url(url) { this._set(url); this.adjustURL(); },
			});
		})
		.methods({
			adjustURL: function() {
				$('#browser').html(this.url);
			},

			// These are remote called on the server, as specified by `shareState` below
			setURL: function(url) {},
			// panBy: function(dX, dY) {},
			// zoomBy: function(dZ, x, y) {},

		})
		.shareState('own', ['setURL', /* *** 'panBy', 'zoomBy' */])
	;

	log.spyMethods(Browser);

	var browser = Browser.create();

	$('#browserURL').keypress(function(ev) { if (ev.which == 13) $('#browserSetURL').click(); });
	$('#browserSetURL').click(function() { browser.setURL($('#browserURL').val()); });

// Invoke the main function
}) ();
</script>
</div>
