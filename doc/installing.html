<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Installing WildOS</title>

    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="assets/css/highlight-docco.css" rel="stylesheet">
    <link href="assets/css/custom.css" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Installing WildOS</a>
        </div>
        <ul id="tocmenu" class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">This page <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li class="toc2"><a href="#beforeinstallingwildos">Before installing WildOS</a></li>
<li class="toc3"><a href="#installingnode.jsandnpm">Installing node.js and npm</a></li>
<li class="toc3"><a href="#installingnode-webkit">Installing node-webkit</a></li>
<li class="toc2"><a href="#installingthewildosserver">Installing the WildOS server</a></li>
<li class="toc3"><a href="#testingtheserver">Testing the server</a></li>
<li class="toc3"><a href="#testingtheserverwithlocalclients">Testing the server with local clients</a></li>
<li class="toc2"><a href="#configuringtheplatform">Configuring the platform</a></li>
<li class="toc2"><a href="#installingtherenderingclients">Installing the rendering clients</a></li>
<li class="toc3"><a href="#installingtherenderingclientsbyhand">Installing the rendering clients by hand</a></li>
<li class="toc3"><a href="#testingtherenderingclients">Testing the rendering clients</a></li>
<li class="toc2"><a href="#runningwildos">Running WildOS</a></li>
<li class="toc2"><a href="#installingupdates">Installing updates</a></li>
<li class="toc3"><a href="#updatinganexistinginstall">Updating an existing install</a></li>
<li class="toc3"><a href="#extras">Extras</a></li>

            </ul>
          </li>
        </ul>
        
        <ul id="filemenu" class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Pages <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="../ReadMe.html">Home</a></li>
<li class="toc2">Use WildOS</li>
<li class="disabled"><a href="installing.html">Installing WildOS</a></li>
<li><a href="configuring.html">Configuring WildOS</a></li>
<li><a href="running.html">Running WildOS</a></li>
<li><a href="applications.html">The WildOS applications</a></li>
<li class="toc2">Develop</li>
<li><a href="index.html">Overview</a></li>
<li><a href="sharing.html">Sharing Objects in WildOS</a></li>
<li><a href="createdev.html">Creating Devices for WildOS</a></li>
<li><a href="createapp.html">Creating an Application for WildOS</a></li>
<li><a href="logging.html">Logging in WildOS</a></li>

            </ul>
          </li>
        </ul>
        
      </div><!-- /.container -->
    </nav>

    <div class="container-fluid">
      <h1 id="installingwildos">Installing WildOS</h1>

<p>WildOS runs on Mac OS X and Linux (currently tested under Ubuntu).
It should also run on Windows since it uses only portable technologies but this has not been tested.</p>

<h2 id="beforeinstallingwildos">Before installing WildOS</h2>

<p>First you need to have <a href="http://nodejs.org">node.js</a> and <a href="https://github.com/rogerwang/node-webkit">node-webkit</a> installed both on the machine where you will be running the WildOS server and on the machines where you will be running clients, such as the display cluster. (You do not need to install anything on those machines where the WildOS clients will run in a regular browser, such as tablets and smartphones). </p>

<h3 id="installingnode.jsandnpm">Installing node.js and npm</h3>

<p>If <code>node.js</code> is already installed on your machine, make sure that it is a recent version (at least 0.10.28) by typing</p>

<pre><code>% node --version
</code></pre>

<p>If node.js is not installed or the version is too old, follow the instructions on the <a href="http://nodejs.org">node.js</a> web site.</p>

<p><code>npm</code>, the node package manager, must also be installed. Depending on your platform, it is installed together with node.js or must be installed separately.</p>

<h3 id="installingnode-webkit">Installing node-webkit</h3>

<p>To install <code>node-webkit</code>, go to the <a href="https://github.com/rogerwang/node-webkit">node-webkit</a> web site and download the version for your OS. Do <strong>not</strong> install node-webkit with the npm package &#8216;nodewebkit&#8217; as this does not work well. </p>

<p>WildOS requires version 0.9.2 or later of node-webkit.</p>

<p>On Linux, node-webkit is an executable called <code>nw</code> and should be accessible in the <code>PATH</code>.
The simplest way to install is to create a symbolic link to <code>nw</code> in <code>/usr/local/bin</code>.
To install in <code>/opt</code> and support multiple versions, follow the instructions in <a href="http://www.exponential.io/blog/install-node-webkit-on-ubuntu-linux">this web page</a>.</p>

<p>On Mac OS X, node-webkit is an application and should be copied to the standard <code>Applications</code> folder.
If it is installed elsewhere, edit the <code>tools/nw</code> script so that <code>NWAPP</code> points to it.
This <code>nw</code> script is designed to be used on the command line in the same way as on Linux.</p>

<h2 id="installingthewildosserver">Installing the WildOS server</h2>

<p>After you have checked out WildOS from the <a href="https://bitbucket.org/mblinsitu/wildos">git repository</a>, the <a href="https://www.lri.fr/svn/in-situ/code/WILD/WildOS">SVN repository</a> or extracted it from the archive, you need to finalize the installation as follows:</p>

<pre><code>% cd WildOS/server
% npm install  
</code></pre>

<p>This will create a <code>node_modules</code> directory in the <code>WildOS/server</code> directory and install the node modules needed by WildOS there. (Make sure you are in the <code>server</code> directory).</p>

<p>It is a good idea to add the <code>WildOS/tools/</code> directory to your PATH so that commands such as <code>wildos</code>, <code>walldo</code> and (on Mac OS X) <code>nw</code>, are directly accessible from the command line.
The rest of this documentation assumes this has been done:</p>

<pre><code>% cd WildOS/tools
% PATH=`pwd`:$PATH
</code></pre>

<h3 id="testingtheserver">Testing the server</h3>

<p>To test the server run the following command:</p>

<pre><code>% wildos -n -w local Browser
</code></pre>

<p>The server will create two windows: one with lots of traces, the other depicting the wall display with the buttons <code>Restart</code> and <code>Shutdown</code> at the top, similar to the image below.
Enter a URL in the text box: It should load </p>

<figure>
<img src="img/browser-noclients.png" alt="Screendump of the browser application when no rendering clients are running" />
<figcaption>Screendump of the browser application when no rendering clients are running</figcaption>
</figure>

<p>If the server does not work correctly, look at error messages in the terminal and in the window with all the traces: errors are displayed in orange or red.
If you are on Mac OS X, try also the following command (from the <code>WildOS</code> directory):</p>

<pre><code>% nw -X server [same options as wildos]
</code></pre>

<p>The <code>-X</code> argument runs node-webkit as a Unix command instead of a Mac OS application so that error messages are displayed on standard output instead of being hidden.</p>

<h3 id="testingtheserverwithlocalclients">Testing the server with local clients</h3>

<p>To test the server with rendering clients running on the same machine, first finish installing the clients:</p>

<pre><code>% cd WildOS/renderer
% npm install
</code></pre>

<p>then run the following command (i.e. the same as before without the <code>-n</code> argument):</p>

<pre><code>% wildos -w local Browser
</code></pre>

<p>This will run the server as before, plus four rendering clients. Each rendering client has a window with a light green background displaying numerous traces, and a content window in the top-left corner of the screen.</p>

<p>The content windows should display the URL specified in the server window, tiled in a consistent way so that the page appears to cross the windows. Moreover, the tiles in the server window should become transparent, to show that the server has establised connections with the clients, as in the picture below.</p>

<figure>
<img src="img/browser.png" alt="Screendump of the browser application when the rendering clients are running" />
<figcaption>Screendump of the browser application when the rendering clients are running</figcaption>
</figure>

<p>If things don&#8217;t work try again to look at error messages in the terminal and in the windows with the traces.</p>

<p>You can also run the server without the clients, as in the previous section, and then run one client by hand:</p>

<pre><code>% cd WildOS/renderer
% nw . -l -i TL
</code></pre>

<p>(The last argument corresponds to the name of the tile and can be <code>TL</code>, <code>TR</code>, <code>BL</code> or <code>BR</code>).</p>

<p>On Mac OS X, add the <code>-X</code> option as before to see the potential errors in the terminal:</p>

<pre><code>% nw -X . -l -i TL
</code></pre>

<p>A possible issue is that the port number used by the server (8080 in this case) is already in use.
In this case, you can either:</p>

<ul>
<li>edit the <code>serverPort</code> property in <code>WildOS/config/local.json</code></li>
<li>or (preferably), specify a different port on the command line by adding the argument <code>-p &lt;number&gt;</code> to the above commands, e.g.:</li>
</ul>

<pre><code>    linux% wildos -w local -p 8901
    macos% nw -X . -l -p 9801 -i TL
</code></pre>

<h2 id="configuringtheplatform">Configuring the platform</h2>

<p>Before you can make a real test where clients are running on remote machines, you need to read the <a href="configuring.html">configuration</a> page to configure WildOS for your platform.</p>

<h2 id="installingtherenderingclients">Installing the rendering clients</h2>

<p>At present, WildOS features a rendering client for tiled displays and a web client for tablets and smartphones. Only the former (the rendering client) needs to be installed on the machine(s) running your tiled display.</p>

<p>Assuming that the configuration of your display cluster is properly described in the <code>configs</code> directory (see previous section), all you need to do to install the clients for the platform <code>MyWall</code> is:</p>

<pre><code>% WALL=MyWall export WALL  
% make install  
</code></pre>

<p>If you need to log in as a different user on the remote machines, make sure to either set the <code>LOGNAME</code> environment variable to that user or to edit the Makefile and change the <code>walldo</code> command on the second line (see the example at the top of the script itself). </p>

<h3 id="installingtherenderingclientsbyhand">Installing the rendering clients by hand</h3>

<p>Alternatively, you can install the clients by hand by following these steps:</p>

<ul>
<li>Create the <code>WildOS</code> directory on the destination machines (preferably under the home directory of the target user);</li>
<li>Recursively copy the <code>renderer</code>, <code>shared</code> and, optionally, <code>slides</code> directories to the destination machines under <code>WildOS</code>;</li>
<li>Install the node.js packages by running <code>npm install</code> in the <code>WildOS/renderer</code> directory in each destination machine.</li>
</ul>

<h3 id="testingtherenderingclients">Testing the rendering clients</h3>

<p>To test the remote clients, proceed as before.
First, try to run the server in the simplest way:</p>

<pre><code>% wildos Browser
</code></pre>

<p>This should display the server windows on the server machine, and a full-screen window on each tile run by a client machine. Entering a URL in the server window should display it both in the server window and on the clients. You can pan and zoom the web page in the server window with the mouse: drag to move the page within the tiled display, use the mousewheel to zoom it in and out.</p>

<p>In case of problems, troubleshoot as follows.</p>

<p>Run the server without launching the clients:</p>

<pre><code>% wildos -n Browser
</code></pre>

<p>then start the clients by clicking the <code>Restart</code> button in the server window, or log in a client machine and run a rendering client by hand as follows:</p>

<pre><code>(client) % nw . -s &lt;server&gt;:&lt;portnumber&gt; -i &lt;instancename&gt;
</code></pre>

<p>where <code>server</code> is the name of the server machine, <code>portnumber</code> the port number the server is running on and <code>instancename</code> the name of the renderer instance as specified in the configuration file, such as &#8216;Left&#8217; or &#8216;Right&#8217; for a configuration where each machine runs two tiles.</p>

<h2 id="runningwildos">Running WildOS</h2>

<p>Once installation is complete, you can refer to the following pages to run WildOS routinely:</p>

<ul>
<li><a href="running.html">Running WildOS</a></li>
<li><a href="applications.html">WildOS Applications</a></li>
</ul>

<h2 id="installingupdates">Installing updates</h2>

<h3 id="updatinganexistinginstall">Updating an existing install</h3>

<p>If you update WildOS, e.g. with <code>svn update</code> or from the git repository, you need to update the clients with <code>make update</code>.</p>

<h3 id="extras">Extras</h3>

<p>If you want to re-generate the documentation (which you shouldn&#8217;t need to do unless you have edited it), you will also need to install <a href="http://fletcherpenney.net/multimarkdown/">MultiMarkdown</a>, a tool to compile Markdown files into HTML.</p>

<p>Then simply run</p>

<pre><code>% make docs
</code></pre>

<p>to generate <code>ReadMe.html</code> as well as the content of the <code>doc</code> directory.</p>

    </div>
    <script type="text/javascript" src="assets/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/js/highlight.custom.js"></script>
    <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript">
      $(document).ready(function() {
        // Hide filemenu if only one entry (the page itself) & toc menu if empty
        if ($('#filemenu ul.dropdown-menu > li').length == 1)
          $('#filemenu').hide();
        if ($('#tocmenu ul.dropdown-menu > li').length == 0)
          $('#tocmenu').hide();

        // Enlarge images on click
        $('figure img').click(function() {
          $(this).toggleClass('full');
        })
      });
    </script>
  </body>
</html>